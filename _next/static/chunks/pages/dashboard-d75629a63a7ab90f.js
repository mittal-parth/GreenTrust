(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{51075:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(56390)}])},24915:function(e,t,s){"use strict";s.d(t,{Z:function(){return h}});var a=s(85893),n=s(67294);s(67814);var r=s(78603),i=s(73032),l=s(46897),c=s(59417),o=s(95867),d=s(61590),x=s(61463),u=s(25720),m=s(1040);function f(e){let{documents:t}=e;console.log("debug:",t);try{let e=t.map(e=>(console.log("debug:",e),(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("a",{target:"_blank",href:"https://ipfs.io/ipfs/"+e.hash,rel:"noopener noreferrer",children:(0,a.jsx)(l.Z,{icon:c.gMD,text:e.name})})})));return(0,a.jsx)("div",{className:"px-4 py-2",children:(0,a.jsx)("div",{className:" mx-2 my-2",children:e})})}catch(e){return(0,a.jsx)(a.Fragment,{})}}function h(e){let{challenge:t,status:s,auth:h,full:p=!0}=e;console.log("challenge",t);let{loading:j,setLoading:v}=(0,n.useContext)(i.O),{snackbarInfo:g,setSnackbarInfo:w}=(0,n.useContext)(o.S),[y,b]=(0,n.useState)(null),[N,Z]=(0,n.useState)(null),k=async e=>{v(!0);try{1==e?await (0,r.uG)(h,"claimChallenge",[t.id]):2==e?await (0,r.uG)(h,"giveVerdict",[t.id,(0,r.d_)("SUCCESSFUL")]):await (0,r.uG)(h,"giveVerdict",[t.id,(0,r.d_)("REJECTED")])}catch(e){w({...g,open:!0,message:"Failure"})}v(!1)};async function _(){var e;let s={},a=await (0,r.uG)(h,"crops",[parseInt(null==t?void 0:null===(e=t.challenged)||void 0===e?void 0:e._hex)]);s.crop=a.data,a=await (0,r.uG)(h,"farms",[parseInt(a.data.id._hex)]),s.farm=a.data,Z(s)}return(0,n.useEffect)(()=>{p&&_()},[]),(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"flex-none bg-white rounded-lg shadow-lg mr-6 p-4 w-full border-l-4 ".concat((0,r.z2)(t.status)),children:(0,a.jsxs)("div",{className:"flex flex-col justify-evenly py-2 px-2",children:[p&&(0,a.jsxs)("div",{className:"flex justify-between mb-4 items-center",children:[N&&(0,a.jsx)("p",{className:"text-xl font-bold whitespace-nowrap overflow-hidden text-ellipsis",children:N.farm.name}),(0,a.jsx)(d.Z,{anchor:(0,a.jsx)("div",{className:"right-4 top-4",children:(0,a.jsx)(u.Z,{icon:c.YHc,styles:"!bg-yellow !w-6 !h-6"})}),popover:(0,a.jsx)(x.Z,{stake:N,full:!1})})]}),(0,a.jsx)("div",{className:"flex justify-between border-".concat(p?"y":"b","-[1.5px] border-darkGray mb-5"),children:(0,a.jsx)("p",{className:"text-md font-bold text-gray/80 font-comfortaa text-justify py-2.5 h-24 overflow-hidden",children:t.description})}),(0,a.jsx)("a",{children:(0,a.jsx)(d.Z,{anchor:(0,a.jsx)(l.Z,{text:"Supporting Documents",icon:c.Pk,style:"text-blue",textStyle:"!text-blue"}),popover:(0,a.jsx)(f,{documents:t.documents?JSON.parse(t.documents).proofs:""})})}),(0,a.jsxs)("div",{className:"".concat(p?"mt-4":""," flex-row flex gap-2"),children:[0==s&&(0,a.jsx)(m.Z,{text:"Accept",styles:"text-sm px-6 py-2",onClick:()=>k(1)}),1==s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{icon:c.LEp,styles:"!bg-primary",onClick:()=>k(2)}),(0,a.jsx)(u.Z,{icon:c.g82,styles:"!bg-red",onClick:()=>k(3)})]})]})]})})})}s(19806)},61463:function(e,t,s){"use strict";var a=s(85893),n=s(41664),r=s.n(n),i=s(93024),l=s(59417),c=s(89032),o=s(46897);let d=e=>{let{stake:t,full:s=!0}=e,n=JSON.parse(t.crop.details),d=new Date(1e3*n.sowedOn),x=d.toLocaleDateString(),u=parseInt(d.getMonth())+parseInt(n.duration)+c.J8;return(0,a.jsx)(r(),{href:"/farm/".concat(t.farm.id,"/crop/").concat(t.cropId),children:(0,a.jsx)("div",{className:"p-6 w-full max-w-72 flex-none bg-white rounded-xl shadow-lg mr-6 hover:scale-[101%]",children:(0,a.jsxs)("div",{className:"flex flex-col justify-evenly",children:[s&&(0,a.jsx)("div",{className:"flex justify-between",children:(0,a.jsx)("p",{className:"text-xl font-bold text-gray-800 font-comfortaa whitespace-nowrap text-ellipsis overflow-hidden",title:t.farm.name,children:t.farm.name})}),s&&(0,a.jsx)("hr",{className:"my-2"}),(0,a.jsxs)("section",{className:"flex flex-col gap-1 font-medium",children:[(0,a.jsx)(o.Z,{text:n.name,icon:i.U27,style:"text-brown"}),s&&(0,a.jsx)(o.Z,{text:"".concat(parseInt(t.crop.stakeAmount._hex),"/- staked"),icon:l.egO,style:"text-primary",textStyle:"text-primary"}),(0,a.jsx)(o.Z,{text:x,icon:l.WRo}),(0,a.jsx)(o.Z,{text:"".concat(u,"M (to mature)"),icon:l.OqI}),(0,a.jsx)(o.Z,{text:t.farm.location,icon:l.opg,style:"text-red"})]})]})})})};t.Z=d},49485:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(85893),n=s(86529),r=s(25720);function i(e){let{children:t,responsive:s}=e;return(0,a.jsx)(n.default,{className:"!overflow-visible",swipeable:!0,draggable:!1,responsive:s,keyBoardControl:!0,customTransition:"transform 300ms ease-in-out",transitionDuration:500,containerClass:"carousel-container",removeArrowOnDeviceType:["sm","xs"],dotListClass:"carousel-dot-list",itemClass:"mx-4",centerMode:!0,customRightArrow:(0,a.jsx)(r.Z,{styles:"react-multiple-carousel__arrow react-multiple-carousel__arrow--right !bg-darkGray/30 hover:!bg-darkGray/60 z-0"}),customLeftArrow:(0,a.jsx)(r.Z,{styles:"react-multiple-carousel__arrow react-multiple-carousel__arrow--left !bg-darkGray/30 hover:!bg-darkGray/60 z-0"}),children:t})}},82349:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(85893),n=s(25675),r=s.n(n);function i(e){let{text:t}=e;return(0,a.jsxs)("div",{className:"items-center flex flex-col w-[20vw] min-w-[280px] my-4",children:[(0,a.jsx)(r(),{src:"/em.gif",width:0,height:0,className:"w-[15vw] min-w-[280px] bg-blend-multiply",alt:"Empty"}),(0,a.jsx)("p",{className:"text-gray text-center max-w-[200px]",children:t})]})}},59299:function(e,t,s){"use strict";var a=s(85893),n=s(46897),r=s(59417),i=s(41664),l=s.n(i);let c=e=>{let{farm:t}=e,s=JSON.parse(t.documents);return(0,a.jsx)(l(),{href:"/farm/".concat(t.id),children:(0,a.jsxs)("div",{className:"w-full !max-w-[280px] bg-white rounded-xl shadow-lg overflow-clip hover:scale-[101%] aspect-[350/409] mr-8",children:[(0,a.jsx)("div",{className:"h-[70%]",children:(0,a.jsx)("img",{className:"object-cover h-full w-full",src:null==s.farmImage?"images/farm.png":"https://ipfs.io/ipfs/"+s.farmImage,alt:"avatar"})}),(0,a.jsxs)("div",{className:"px-6 flex flex-col justify-center items-center h-[30%]",children:[(0,a.jsx)("div",{className:"w-full",title:t.name,children:(0,a.jsx)("p",{className:"font-darkGray text-lg font-bold whitespace-nowrap text-ellipsis overflow-hidden text-center",children:t.name})}),(0,a.jsx)(n.Z,{icon:r.opg,text:t.location,style:"text-red"})]})]})})};t.Z=c},25720:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(85893),n=s(67814);function r(e){let{icon:t,styles:s,onClick:r}=e;return(0,a.jsx)("div",{onClick:r,class:"".concat(null!=s?s:""," flex justify-center items-center text-white bg-gray rounded-full w-8 h-8 hover:scale-105 cursor-pointer"),children:t&&(0,a.jsx)(n.G,{icon:t})})}},46897:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(85893),n=s(67814);function r(e){let{icon:t,text:s,style:r,iconDivStyle:i,textStyle:l}=e;return(0,a.jsxs)("div",{className:"flex items-center px-0 py-0 flex-row gap-[10px]",children:[(0,a.jsx)("div",{className:"".concat(i," flex justify-center items-center"),children:(0,a.jsx)(n.G,{icon:t,className:"w-[20px] h-[20px] ".concat(r)})}),(0,a.jsx)("p",{className:"text-darkGray text-base ".concat(l),children:s})]})}},56390:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(85893),n=s(67294),r=s(78603),i=s(77365),l=s(95867),c=s(73032),o=s(24915),d=s(82349),x=s(49485);function u(){let e=(0,i.a)(),{snackbarInfo:t,setSnackbarInfo:s}=(0,n.useContext)(l.S),{loading:u,setLoading:m}=(0,n.useContext)(c.O),[f,h]=(0,n.useState)(null),[p,j]=(0,n.useState)(null),[v,g]=(0,n.useState)(null),[w,y]=(0,n.useState)(null),[b,N]=(0,n.useState)(null),[Z,k]=(0,n.useState)(null);(0,n.useEffect)(()=>{e.user&&_()},[null==e?void 0:e.user]);let _=async()=>{m(!0);try{let t=await (0,r.uG)(e,"fetchUserType");if(k(t.data),"verifier"==t.data){var a,n,i;let t=await (0,r.uG)(e,"addressToVerifierIds",[e.user.address]);N(t.data);let s=await (0,r.uG)(e,"fetchAllChallenges");y(s.data),h(null===(a=s.data)||void 0===a?void 0:a.filter(e=>e.status==(0,r.d_)("ALLOTED")&&parseInt(e.verifierId._hex)==parseInt(t.data._hex))),j(null===(n=s.data)||void 0===n?void 0:n.filter(e=>e.status==(0,r.d_)("OPEN")&&parseInt(e.verifierId._hex)!=parseInt(t.data._hex))),g(null===(i=s.data)||void 0===i?void 0:i.filter(e=>e.status==(0,r.d_)("SUCCESSFUL")||e.status==(0,r.d_)("REJECTED")))}}catch(e){console.log(e),s({...t,open:!0,message:"Error ".concat(e.code,": ").concat(e.message)})}m(!1)},S={lg:{breakpoint:{max:3e3,min:1500},items:4},md:{breakpoint:{max:1500,min:1200},items:3},sm:{breakpoint:{max:1200,min:720},items:2},xs:{breakpoint:{max:720,min:0},items:1}};return(0,a.jsx)("div",{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"mb-0 text-red",children:"Pending Reviews"}),(0,a.jsx)("div",{className:"static my-8",children:f&&f.length>0?(0,a.jsx)(x.Z,{responsive:S,children:null==f?void 0:f.map((t,s)=>(0,a.jsx)(o.Z,{challenge:t,auth:e,status:1},s))}):(0,a.jsx)(d.Z,{text:"You do not have any pending reviews"})}),(0,a.jsx)("h1",{className:"mb-0",children:"Raised Challenges"}),(0,a.jsx)("div",{className:"static my-8",children:p&&p.length>0?(0,a.jsx)(x.Z,{responsive:S,children:null==p?void 0:p.map((t,s)=>(0,a.jsx)(o.Z,{challenge:t,auth:e,status:0},s))}):(0,a.jsx)(d.Z,{text:"You do not have any pending reviews"})}),(0,a.jsx)("h1",{className:"mb-0 text-gray",children:"Archive"}),(0,a.jsx)("div",{className:"static my-8",children:v&&v.length>0?(0,a.jsx)(x.Z,{responsive:S,children:null==v?void 0:v.map((t,s)=>(0,a.jsx)(o.Z,{challenge:t,auth:e,status:2},s))}):(0,a.jsx)(d.Z,{text:"You do not have any pending reviews"})})]})})}var m=s(41664),f=s.n(m),h=s(59299),p=s(61463),j=s(25720),v=s(59417);function g(e){let{auth:t}=e,[s,i]=(0,n.useState)([]),[c,o]=(0,n.useState)([]),{snackbarInfo:u,setSnackbarInfo:m}=(0,n.useContext)(l.S);async function g(){try{let e=await (0,r.uG)(t,"addressToFarmerIds",[t.user.address]),s=await (0,r.uG)(t,"fetchFarmerFarms",[e.data]);i(s.data);let a=await (0,r.uG)(t,"fetchFarmerStakes",[e.data]),n=[];for(let e=0;e<a.data.length;e++){let s=a.data[e],i=await (0,r.uG)(t,"crops",[s.cropId]),l=await (0,r.uG)(t,"farms",[i.data.farmId]);n.push({...s,crop:i.data,farm:l.data})}o(n)}catch(e){m({...u,open:!0,message:"Error ".concat(e.code,": ").concat(e.message)})}}return(0,n.useEffect)(()=>{g()},[]),(0,a.jsxs)("div",{children:[(0,a.jsxs)("section",{className:"mb-10",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-10",children:[(0,a.jsx)("h1",{children:"My Farms"}),(0,a.jsx)(f(),{href:"/farm/add",children:(0,a.jsx)(j.Z,{icon:v.r8p})})]}),(0,a.jsx)("div",{className:"static",children:s.length>0?(0,a.jsx)(x.Z,{responsive:{lg:{breakpoint:{max:3e3,min:1300},items:4},md:{breakpoint:{max:1300,min:800},items:3},sm:{breakpoint:{max:800,min:520},items:2},xs:{breakpoint:{max:520,min:0},items:1}},children:null==s?void 0:s.map(e=>(0,a.jsx)(h.Z,{farm:e},e.id))}):(0,a.jsx)(d.Z,{text:"No farms registered yet!"})})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{children:"Staked Crops"}),(0,a.jsx)("div",{className:"static",children:c.length>0?(0,a.jsx)(x.Z,{responsive:{lg:{breakpoint:{max:3e3,min:1500},items:4},md:{breakpoint:{max:1500,min:1200},items:3},sm:{breakpoint:{max:1200,min:720},items:2},xs:{breakpoint:{max:720,min:0},items:1}},children:null==c?void 0:c.map(e=>(0,a.jsx)(p.Z,{stake:e}))}):(0,a.jsx)(d.Z,{text:"You haven't sponsored any farms yet"})})]})]})}function w(){let{loading:e,setLoading:t}=(0,n.useContext)(c.O),[s,l]=(0,n.useState)(null);(0,n.useEffect)(()=>{t(!0)},[]);let o=(0,i.a)();return((0,n.useEffect)(()=>{o.user&&(console.log("debug:",o.user),t(!1),(0,r.uG)(o,"fetchUserType").then(e=>l(e.data)))},[null==o?void 0:o.user]),"farmer"==s)?(0,a.jsx)(g,{auth:o}):"verifier"==s?(0,a.jsx)(u,{}):(0,a.jsx)(a.Fragment,{})}s(1040)},72950:function(){},22868:function(){},14777:function(){},99830:function(){},70209:function(){}},function(e){e.O(0,[948,524,774,888,179],function(){return e(e.s=51075)}),_N_E=e.O()}]);