(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{2920:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/farm/[farmId]/crop/[cropId]/sensor/add",function(){return a(55542)}])},82902:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var l=a(85893),s=a(67294);function n(e){let{label:t,onChange:a,placeholder:s,type:n,isMultiple:r}=e;return(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{className:"mb-5",children:[(0,l.jsx)("label",{className:"block text-gray text-sm font-semibold mb-2.5",for:"form-"+t,children:t}),"textarea"!=n?(0,l.jsx)("input",{id:"form-"+t,type:n,placeholder:s,onChange:a,...r?{multiple:!0}:{}}):(0,l.jsx)("textarea",{id:"form-"+t,onChange:a})]})})}var r=a(1040),i=a(32512),o=a(67814),c=a(59417),u=a(46897);function d(e){let{label:t,setFiles:a,isMultiple:s}=e,{getRootProps:n,getInputProps:r,open:d,acceptedFiles:m}=(0,i.uI)({multiple:null!=s&&s}),f=m.map(e=>(a(m),(0,l.jsx)("li",{children:(0,l.jsx)(u.Z,{text:"".concat(e.path," - ").concat(e.size," bytes"),icon:c.gMD,style:"text-gray"})},e.path)));return(0,l.jsxs)("div",{className:"mb-6 w-full",id:"dropzone",children:[(0,l.jsx)("label",{className:"block text-gray text-sm font-semibold mb-2.5",children:t}),(0,l.jsxs)("div",{...n({className:"dropzone w-full bg-gray/10 flex justify-center items-center py-12 rounded-xl border-darkGray border-[1px] cursor-pointer mb-4"}),children:[(0,l.jsx)("input",{...r()}),(0,l.jsx)(o.G,{icon:c.wEO,className:"w-[20px] h-[20px] text-gray"})]}),(0,l.jsx)("ul",{children:f})]})}var m=a(78603),f=a(73032),x=a(95867);function h(e){var t,a;let{handleSubmit:i,fields:o,setData:c,data:u}=e,{loading:h,setLoading:p}=(0,s.useContext)(f.O),{snackbarInfo:b,setSnackbarInfo:j}=(0,s.useContext)(x.S),y=[];async function v(){for(let t of(p(!0),o))if(t.isFile)try{if(t.isMultiple){let e=await (0,m.cT)(Object.values(t.file)),a=t.file.map(e=>e.path),l={};l[t.dataLabel]=[],e.forEach((e,s)=>{var n;let r={};r.name=(null===(n=a[s])||void 0===n?void 0:n.split(".")[0])||"greentrust",r.hash=e[0].hash,l[t.dataLabel]=[...l[t.dataLabel],r]}),t.setFile(JSON.stringify(l)),y.push(JSON.stringify(l))}else if(t.file){let e=await (0,m.cT)(Object.values(t.file));t.setFile(e[0][0].hash),y.push(e[0][0].hash)}}catch(a){var e;console.log("form debug: ".concat(a)),j({...b,open:!0,message:"Please upload necessary files for ".concat(null!==(e=t.dataLabel)&&void 0!==e?e:t.label.toLowerCase())})}try{await i(...y),j({...b,open:!0,severity:"success",message:"Success"})}catch(e){j({...b,open:!0,message:"Error ".concat(e.code,": ").concat(e.message)})}p(!1)}return(0,l.jsx)("div",{className:"mb-6 font-comfortaa w-full",children:(0,l.jsxs)("form",{onSubmit:i,children:[o.map(e=>(0,l.jsx)(l.Fragment,{children:e.isFile?(0,l.jsx)(d,{label:e.label,setFiles:e.setFile,isMultiple:e.isMultiple}):(0,l.jsx)(n,{label:e.label,onChange:a=>c({...u,[null!==(t=e.dataLabel)&&void 0!==t?t:e.label.toLowerCase()]:a.target.value}),placeholder:e.placeholder,type:null!==(a=e.type)&&void 0!==a?a:"text"})})),(0,l.jsx)(r.Z,{text:"Submit",onClick:v})]})})}},89541:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var l=a(85893),s=a(33884);function n(e){let{image:t,title:a,text:n,form:r,imageStyle:i}=e;return(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:justify-around md:mt-12",children:[(0,l.jsxs)("div",{className:"flex flex-col items-start mb-6 md:mb-0",children:[(0,l.jsx)("div",{className:"md:flex shrink hidden mb-4 ".concat(i),children:(0,l.jsx)(s.Z,{loop:!0,animationData:t,play:!0})}),(0,l.jsx)("h1",{className:"mb-4",children:a}),(0,l.jsx)("p",{className:"text-lg font-bold text-gray/70 max-w-[320px]",children:n})]}),(0,l.jsx)("div",{className:"flex w-full max-w-[400px] mx-auto md:mx-0",children:r})]})}},55542:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var l=a(85893),s=a(11163),n=a(67294),r=a(77365),i=a(95867),o=a(78603),c=a(89541),u=a(82902),d=a(67091);function m(){let{snackbarInfo:e,setSnackbarInfo:t}=(0,n.useContext)(i.S),a=(0,s.useRouter)(),{farmId:m,cropId:f}=a.query,x=(0,r.a)(),[h,p]=(0,n.useState)({}),b=async e=>{await (0,o.uG)(x,"addSensor",[f,h.name]),a.replace("/farm/".concat(m,"/crop/").concat(f))};return(0,l.jsx)(c.Z,{form:(0,l.jsx)(u.Z,{handleSubmit:b,fields:[{label:"Name",placeholder:"NPK Sensor"}],setData:p,data:h}),title:"Register your sensor",text:"Improve your credibility by providing continuous sensor data.",image:d})}}},function(e){e.O(0,[296,185,512,33,774,888,179],function(){return e(e.s=2920)}),_N_E=e.O()}]);