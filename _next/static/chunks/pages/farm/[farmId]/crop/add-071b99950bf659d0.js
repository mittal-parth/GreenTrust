(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{59825:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/farm/[farmId]/crop/add",function(){return a(87573)}])},82902:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var l=a(85893),s=a(67294);function n(e){let{label:t,onChange:a,placeholder:s,type:n,isMultiple:i}=e;return(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{className:"mb-5",children:[(0,l.jsx)("label",{className:"block text-gray text-sm font-semibold mb-2.5",for:"form-"+t,children:t}),"textarea"!=n?(0,l.jsx)("input",{id:"form-"+t,type:n,placeholder:s,onChange:a,...i?{multiple:!0}:{}}):(0,l.jsx)("textarea",{id:"form-"+t,onChange:a})]})})}var i=a(1040),r=a(32512),o=a(67814),c=a(59417),d=a(46897);function u(e){let{label:t,setFiles:a,isMultiple:s}=e,{getRootProps:n,getInputProps:i,open:u,acceptedFiles:m}=(0,r.uI)({multiple:null!=s&&s}),f=m.map(e=>(a(m),(0,l.jsx)("li",{children:(0,l.jsx)(d.Z,{text:"".concat(e.path," - ").concat(e.size," bytes"),icon:c.gMD,style:"text-gray"})},e.path)));return(0,l.jsxs)("div",{className:"mb-6 w-full",id:"dropzone",children:[(0,l.jsx)("label",{className:"block text-gray text-sm font-semibold mb-2.5",children:t}),(0,l.jsxs)("div",{...n({className:"dropzone w-full bg-gray/10 flex justify-center items-center py-12 rounded-xl border-darkGray border-[1px] cursor-pointer mb-4"}),children:[(0,l.jsx)("input",{...i()}),(0,l.jsx)(o.G,{icon:c.wEO,className:"w-[20px] h-[20px] text-gray"})]}),(0,l.jsx)("ul",{children:f})]})}var m=a(78603),f=a(73032),x=a(95867);function h(e){var t,a;let{handleSubmit:r,fields:o,setData:c,data:d}=e,{loading:h,setLoading:b}=(0,s.useContext)(f.O),{snackbarInfo:p,setSnackbarInfo:j}=(0,s.useContext)(x.S),y=[];async function v(){for(let t of(b(!0),o))if(t.isFile)try{if(t.isMultiple){let e=await (0,m.cT)(Object.values(t.file)),a=t.file.map(e=>e.path),l={};l[t.dataLabel]=[],e.forEach((e,s)=>{var n;let i={};i.name=(null===(n=a[s])||void 0===n?void 0:n.split(".")[0])||"greentrust",i.hash=e[0].hash,l[t.dataLabel]=[...l[t.dataLabel],i]}),t.setFile(JSON.stringify(l)),y.push(JSON.stringify(l))}else if(t.file){let e=await (0,m.cT)(Object.values(t.file));t.setFile(e[0][0].hash),y.push(e[0][0].hash)}}catch(a){var e;console.log("form debug: ".concat(a)),j({...p,open:!0,message:"Please upload necessary files for ".concat(null!==(e=t.dataLabel)&&void 0!==e?e:t.label.toLowerCase())})}try{await r(...y),j({...p,open:!0,severity:"success",message:"Success"})}catch(e){j({...p,open:!0,message:"Error ".concat(e.code,": ").concat(e.message)})}b(!1)}return(0,l.jsx)("div",{className:"mb-6 font-comfortaa w-full",children:(0,l.jsxs)("form",{onSubmit:r,children:[o.map(e=>(0,l.jsx)(l.Fragment,{children:e.isFile?(0,l.jsx)(u,{label:e.label,setFiles:e.setFile,isMultiple:e.isMultiple}):(0,l.jsx)(n,{label:e.label,onChange:a=>c({...d,[null!==(t=e.dataLabel)&&void 0!==t?t:e.label.toLowerCase()]:a.target.value}),placeholder:e.placeholder,type:null!==(a=e.type)&&void 0!==a?a:"text"})})),(0,l.jsx)(i.Z,{text:"Submit",onClick:v})]})})}},89541:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var l=a(85893),s=a(33884);function n(e){let{image:t,title:a,text:n,form:i,imageStyle:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:justify-around md:mt-12",children:[(0,l.jsxs)("div",{className:"flex flex-col items-start mb-6 md:mb-0",children:[(0,l.jsx)("div",{className:"md:flex shrink hidden mb-4 ".concat(r),children:(0,l.jsx)(s.Z,{loop:!0,animationData:t,play:!0})}),(0,l.jsx)("h1",{className:"mb-4",children:a}),(0,l.jsx)("p",{className:"text-lg font-bold text-gray/70 max-w-[320px]",children:n})]}),(0,l.jsx)("div",{className:"flex w-full max-w-[400px] mx-auto md:mx-0",children:i})]})}},87573:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var l=a(85893),s=a(11163),n=a(67294),i=a(77365),r=a(73032),o=a(95867),c=a(78603),d=a(89541),u=a(82902),m=a(67091);function f(){let{loading:e,setLoading:t}=(0,n.useContext)(r.O),{snackbarInfo:a,setSnackbarInfo:f}=(0,n.useContext)(o.S),x=(0,s.useRouter)(),{farmId:h,cropId:b}=x.query,p=(0,i.a)(),[j,y]=(0,n.useState)({}),v=async e=>{let t=JSON.stringify({name:j.name,sowedOn:Math.floor(new Date(j.sowedOn).getTime()/1e3),duration:j.duration,size:j.size});await (0,c.uG)(p,"addCrop",[t,0,h,j.stakeAmount]),x.push("/farm/"+h)};return(0,l.jsx)(d.Z,{form:(0,l.jsx)(u.Z,{handleSubmit:v,fields:[{label:"Name",placeholder:"Tomato"},{label:"Sowed On",type:"date",dataLabel:"sowedOn"},{label:"Stake amount (in Wei)",type:"number",dataLabel:"stakeAmount"},{label:"Duration (in months)",type:"number",dataLabel:"duration"},{label:"Size (in acres)",type:"number",dataLabel:"size"}],setData:y,data:j}),title:"Add a crop",text:"Provide the details asked in the form.",image:m})}}},function(e){e.O(0,[296,185,512,33,774,888,179],function(){return e(e.s=59825)}),_N_E=e.O()}]);