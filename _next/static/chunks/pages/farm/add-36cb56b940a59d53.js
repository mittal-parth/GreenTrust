(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[420],{39413:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/farm/add",function(){return a(49086)}])},82902:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var l=a(85893),s=a(67294);function i(e){let{label:t,onChange:a,placeholder:s,type:i,isMultiple:n}=e;return(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("div",{className:"mb-5",children:[(0,l.jsx)("label",{className:"block text-gray text-sm font-semibold mb-2.5",for:"form-"+t,children:t}),"textarea"!=i?(0,l.jsx)("input",{id:"form-"+t,type:i,placeholder:s,onChange:a,...n?{multiple:!0}:{}}):(0,l.jsx)("textarea",{id:"form-"+t,onChange:a})]})})}var n=a(1040),r=a(32512),c=a(67814),o=a(59417),u=a(46897);function d(e){let{label:t,setFiles:a,isMultiple:s}=e,{getRootProps:i,getInputProps:n,open:d,acceptedFiles:m}=(0,r.uI)({multiple:null!=s&&s}),x=m.map(e=>(a(m),(0,l.jsx)("li",{children:(0,l.jsx)(u.Z,{text:"".concat(e.path," - ").concat(e.size," bytes"),icon:o.gMD,style:"text-gray"})},e.path)));return(0,l.jsxs)("div",{className:"mb-6 w-full",id:"dropzone",children:[(0,l.jsx)("label",{className:"block text-gray text-sm font-semibold mb-2.5",children:t}),(0,l.jsxs)("div",{...i({className:"dropzone w-full bg-gray/10 flex justify-center items-center py-12 rounded-xl border-darkGray border-[1px] cursor-pointer mb-4"}),children:[(0,l.jsx)("input",{...n()}),(0,l.jsx)(c.G,{icon:o.wEO,className:"w-[20px] h-[20px] text-gray"})]}),(0,l.jsx)("ul",{children:x})]})}var m=a(78603),x=a(73032),f=a(95867);function p(e){var t,a;let{handleSubmit:r,fields:c,setData:o,data:u}=e,{loading:p,setLoading:h}=(0,s.useContext)(x.O),{snackbarInfo:b,setSnackbarInfo:j}=(0,s.useContext)(f.S),g=[];async function y(){for(let t of(h(!0),c))if(t.isFile)try{if(t.isMultiple){let e=await (0,m.cT)(Object.values(t.file)),a=t.file.map(e=>e.path),l={};l[t.dataLabel]=[],e.forEach((e,s)=>{var i;let n={};n.name=(null===(i=a[s])||void 0===i?void 0:i.split(".")[0])||"greentrust",n.hash=e[0].hash,l[t.dataLabel]=[...l[t.dataLabel],n]}),t.setFile(JSON.stringify(l)),g.push(JSON.stringify(l))}else if(t.file){let e=await (0,m.cT)(Object.values(t.file));t.setFile(e[0][0].hash),g.push(e[0][0].hash)}}catch(a){var e;console.log("form debug: ".concat(a)),j({...b,open:!0,message:"Please upload necessary files for ".concat(null!==(e=t.dataLabel)&&void 0!==e?e:t.label.toLowerCase())})}try{await r(...g),j({...b,open:!0,severity:"success",message:"Success"})}catch(e){j({...b,open:!0,message:"Error ".concat(e.code,": ").concat(e.message)})}h(!1)}return(0,l.jsx)("div",{className:"mb-6 font-comfortaa w-full",children:(0,l.jsxs)("form",{onSubmit:r,children:[c.map(e=>(0,l.jsx)(l.Fragment,{children:e.isFile?(0,l.jsx)(d,{label:e.label,setFiles:e.setFile,isMultiple:e.isMultiple}):(0,l.jsx)(i,{label:e.label,onChange:a=>o({...u,[null!==(t=e.dataLabel)&&void 0!==t?t:e.label.toLowerCase()]:a.target.value}),placeholder:e.placeholder,type:null!==(a=e.type)&&void 0!==a?a:"text"})})),(0,l.jsx)(n.Z,{text:"Submit",onClick:y})]})})}},89541:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var l=a(85893),s=a(33884);function i(e){let{image:t,title:a,text:i,form:n,imageStyle:r}=e;return(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:justify-around md:mt-12",children:[(0,l.jsxs)("div",{className:"flex flex-col items-start mb-6 md:mb-0",children:[(0,l.jsx)("div",{className:"md:flex shrink hidden mb-4 ".concat(r),children:(0,l.jsx)(s.Z,{loop:!0,animationData:t,play:!0})}),(0,l.jsx)("h1",{className:"mb-4",children:a}),(0,l.jsx)("p",{className:"text-lg font-bold text-gray/70 max-w-[320px]",children:i})]}),(0,l.jsx)("div",{className:"flex w-full max-w-[400px] mx-auto md:mx-0",children:n})]})}},46897:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var l=a(85893),s=a(67814);function i(e){let{icon:t,text:a,style:i,iconDivStyle:n,textStyle:r}=e;return(0,l.jsxs)("div",{className:"flex items-center px-0 py-0 flex-row gap-[10px]",children:[(0,l.jsx)("div",{className:"".concat(n," flex justify-center items-center"),children:(0,l.jsx)(s.G,{icon:t,className:"w-[20px] h-[20px] ".concat(i)})}),(0,l.jsx)("p",{className:"text-darkGray text-base ".concat(r),children:a})]})}},49086:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var l=a(85893),s=a(11163),i=a(67294),n=a(77365);a(73032);var r=a(95867),c=a(78603),o=a(82902),u=a(89541),d=a(14748);function m(){let[e,t]=(0,i.useState)(!0),{snackbarInfo:a,setSnackbarInfo:m}=(0,i.useContext)(r.S),x=(0,s.useRouter)(),f=(0,n.a)();(0,i.useEffect)(()=>{f.user&&t(!1)},[f.user]),(0,i.useEffect)(()=>{f.user||t(!0)},[]);let[p,h]=(0,i.useState)({}),[b,j]=(0,i.useState)([]),[g,y]=(0,i.useState)([]),v=async(e,t)=>{(t=JSON.parse(t)).farmImage=e,await (0,c.uG)(f,"addFarm",[p.size,p.name,String(p.latitute),String(p.longitude),p.location,t=JSON.stringify(t)]),x.replace("/dashboard")};return(0,l.jsx)(u.Z,{form:(0,l.jsx)(o.Z,{handleSubmit:v,fields:[{label:"Name",placeholder:"Jane's Farm"},{label:"Size (in acres)",dataLabel:"size",type:"number"},{label:"Location",placeholder:"1234 Main St"},{label:"Latitude",placeholder:"xx.xx",type:"number"},{label:"Longitude",placeholder:"xx.xx",type:"number"},{label:"Farm Image",isFile:!0,isMultiple:!1,setFile:y,file:g},{label:"Document Proofs",isFile:!0,isMultiple:!0,setFile:j,file:b}],setData:h,data:p}),title:"Setup your farm",text:"Provide the details asked in the form.",image:d,imageStyle:"!max-w-[30vw]"})}}},function(e){e.O(0,[296,185,512,748,774,888,179],function(){return e(e.s=39413)}),_N_E=e.O()}]);